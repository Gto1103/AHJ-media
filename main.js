(()=>{"use strict";function e(e,t,n){const r=document.createElement("div"),a=document.createElement("p"),l=document.createElement("p");r.classList.add("message"),a.classList.add("date"),a.innerText=function(){const e=new Date,t=e.getFullYear().toString().slice(2,4);let n=e.getMonth()+1;n<10&&(n=`0${n}`);let r=e.getDate();r<10&&(r=`0${r}`);let a=e.getHours();a<10&&(a=`0${a}`);let l=e.getMinutes();return l<10&&(l=`0${l}`),`${r}.${n}.${t} ${a}:${l}`}(),l.classList.add("text"),l.innerText=`${t.value}`,e.classList.add("coordinates"),r.appendChild(a),r.appendChild(l),r.appendChild(e),n.prepend(r)}const t=document.querySelector(".textarea"),n=document.querySelector(".messages"),r=document.querySelector(".modal"),a=document.querySelector(".ok"),l=document.querySelector(".cancel"),o=document.querySelector(".popup-text");let d;t.addEventListener("keydown",(a=>{if(""!==t.value&&"Enter"===a.code){d=null,t.setAttribute("readonly","true");const a=r=>{const{latitude:a}=r.coords,{longitude:l}=r.coords;d=document.createElement("p"),d.innerText=`[${a}, ${l}]`,e(d,t,n),t.value="",t.removeAttribute("readonly")},l=e=>{console.error(e),r.classList.remove("hidden")};navigator.geolocation.getCurrentPosition(a,l)}})),l.addEventListener("click",(e=>{e.preventDefault(),r.classList.add("hidden"),o.classList.toggle("not-valid"),t.removeAttribute("readonly"),o.value=""})),a.addEventListener("click",(a=>{a.preventDefault();const l=function(e){const t=e.trim().split(",");let n=t[0],r=t[1];return!!r&&(n=n.replace("[","").trim(),r=r.replace("]","").trim(),!Number.isNaN(Number(n))&&!Number.isNaN(Number(r))&&!(Math.abs(Number(n))>90)&&!(Math.abs(Number(r))>180)&&{latitude:+`${n}`,longitude:+`${r}`})}(o.value);l?(d=document.createElement("p"),d.innerText=`[${l.latitude}, ${l.longitude}] ðŸ‘€`,e(d,t,n),t.value="",o.value="",o.classList.remove("not-valid"),r.classList.add("hidden"),t.removeAttribute("readonly")):(t.removeAttribute("readonly"),o.classList.add("not-valid"),o.value="")}))})();